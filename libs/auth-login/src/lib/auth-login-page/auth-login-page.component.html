<h1 class="auth-title mb-5">Log In to your Account</h1>

<form [formGroup]="loginForm" errorTailor>
  <div class="form-control">
    <p class="text14 font-bold">Email</p>
    <mat-form-field appearance="outline" class="w-full">
      <input
        matInput
        formControlName="username"
        [controlErrorAnchor]="emailAnchor"
        [controlErrorsOnBlur]="false"
      >
    </mat-form-field>

    <ng-template
      controlErrorAnchor
      #emailAnchor="controlErrorAnchor"
    ></ng-template>
  </div>

  <div class="form-control">
    <p class="text14 font-bold mr-1">Password</p>
    <mat-form-field appearance="outline" class="w-full">
      <input
        [type]="hidePassword ? 'password' : 'text'"
        matInput
        formControlName="password"
        [controlErrorAnchor]="passwordAnchor"
        [controlErrorsOnBlur]="false"
      >
      <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" color="primary"
              [lazy]="true"
              [tippy]="hidePassword ? 'Show Password' : 'Hide Password'"
      >
        <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
      </button>
    </mat-form-field>

    <ng-template
      controlErrorAnchor
      #passwordAnchor="controlErrorAnchor"
    ></ng-template>
  </div>

  <div class="flex-col">
    <button
      mat-raised-button
      type="submit"
      color="primary"
      class="w-full loginBtn"
      (click)="login()"
      [class.hbd-spinner]="loading"
      [disabled]="loading"
    >
      Login
    </button>


    <button
      class="w-full mt-6 text14 primary"
      (click)="onJoin()"
      mat-button
      mat-stroked-button
    >
      Join to HiBoard !
    </button>
  </div>

  <p
    class="auth-form-error"
    *ngIf="error"
  >
    {{ error }}
  </p>
</form>
