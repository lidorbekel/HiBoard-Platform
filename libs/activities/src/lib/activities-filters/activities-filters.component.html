<form errorTailor class="filters-container" [formGroup]="formGroup">
  <mat-form-field appearance="outline" [class.loading]="loading">
    <mat-select formControlName="name"
                multiple placeholder="All names"
                [disabled]="loading"
                disableOptionCentering
                panelClass="myPanelClass"
    >
      <mat-select-trigger class="flex items-center h-full">
        <mat-chip-list class="chip-list">
          <mat-chip
            *ngFor="let name of nameControl.value?.slice(0, 3)"
            [removable]="true"
            (removed)="remove(nameControl, name)"
            color="primary"
            selected
          >
            <span class="chip-text">{{ name }}</span>

            <mat-icon matChipRemove>cancel</mat-icon>
          </mat-chip>
        </mat-chip-list>

        <span *ngIf="nameControl.value?.length > 3" class="primary ml-1">
                +{{nameControl.value.length - 3}}
              </span>
      </mat-select-trigger>

      <mat-option *ngFor="let name of names" [value]="name">{{name}}</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-select
      formControlName="tag"
      multiple
      placeholder="All tags"
      [disabled]="loading"
      disableOptionCentering
      panelClass="myPanelClass"
    >
      <mat-select-trigger class="flex-align-center">
        <mat-chip-list>
          <mat-chip *ngFor="let tag of tagControl.value?.slice(0,3)"
                    [removable]="true" (removed)="remove(tagControl, tag)" color="primary" selected>
            {{ tag }}
            <mat-icon matChipRemove>cancel</mat-icon>
          </mat-chip>
        </mat-chip-list>

        <span *ngIf="tagControl.value?.length > 3" class="primary ml-1">
                  +{{tagControl.value.length - 3}}
                </span>
      </mat-select-trigger>

      <mat-option *ngFor="let tag of tags" [value]="tag">{{tag}}</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-select
      formControlName="status"
      multiple
      placeholder="All statuses"
      [disabled]="loading"
      disableOptionCentering
      panelClass="myPanelClass"
    >
      <mat-select-trigger class="flex-align-center">
        <mat-chip-list>
          <mat-chip *ngFor="let status of statusControl.value"
                    [removable]="true" (removed)="remove(statusControl, status)" color="primary" selected>
            {{ status }}
            <mat-icon matChipRemove>cancel</mat-icon>
          </mat-chip>
        </mat-chip-list>

        <span *ngIf="statusControl.value?.length > 3" class="primary ml-1">
                +{{statusControl.value.length - 3}}
              </span>
      </mat-select-trigger>

      <mat-option *ngFor="let status of statuses" [value]="status">{{status}}</mat-option>
    </mat-select>
  </mat-form-field>

  <button
    mat-stroked-button
    class="clear-all-btn"
    (click)="clearAll()"
    [disabled]="loading"
  >
    Clear All
  </button>
</form>
